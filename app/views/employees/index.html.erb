<% @title = "Lista de empleados" %>

<% content_for :description do %>
  <p></p>
<% end %>

<% content_for :actions do %>
  <div class="pull-right">
    <%= link_to employees_path(format: :xlsx), class: 'btn btn-primary btn-large' do %>
      <%= fa_icon_tag "file-excel-o " %> Exportar
    <% end %>

    <%= link_to new_employee_path, class: 'btn btn-primary btn-large' do %>
      <%= fa_icon_tag "plus" %> Agregar empleado
    <% end %>
  </div>
<% end %>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      <%= form_tag(employees_path, :method => "get", id: "search-form", class: "horizontal-form") do %>
        <div class="form-inputs row">
          <div class="col-9 col-sm-10">
            <%= text_field_tag :search, params[:search], placeholder: "Buscar cliente", class: "form-control" %>
          </div>
          <div class="">
            <%= submit_tag "Buscar", class: "btn btn-primary btn-large center" %>
          </div>
        </div>
      <% end %>
      <br>
      <div class="card">
        <table class="table table-striped table-hover table-sm-responsive">
          <thead>
          <tr>
            <th>Nombres</th>
            <th>Apellidos</th>
            <th>Telefonos</th>
            <th>CÃ©dula</th>
            <th>Rol</th>
            <th>Estado</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          <% @employees.each do |employee| %>
            <tr>
              <td><%= employee.first_name %></td>
              <td><%= employee.last_name %></td>
              <td><%= employee.phone %></td>
              <td><%= employee.dni %></td>
              <td><%= employee.role_name %></td>
              <td>
                <span class="badge badge-<%= employee.status ? "success" : "danger" %>">
                  <%= employee.status ? "Activo" : "Inactivo" %>
                </span>
              </td>
              <td class="actions text-right">
                <div class="btn-group">
                  <%= link_to theme_icon_tag("eye"), employee, 'data-toggle': 'tooltip', title: 'Ver', class: "btn btn-link" %>
                  <%= link_to theme_icon_tag("pencil-alt"), edit_employee_path(employee), 'data-toggle': 'tooltip', title: 'Editar', class: "btn btn-link" %>
                </div>
              </td>
            </tr>
          <% end %>
          <% if @employees.length == 0 %><% content_for :actions do %>
  <div class="pull-right">
    <%= link_to customers_path(format: :xlsx), class: 'btn btn-primary btn-large' do %>
      <%= fa_icon_tag "file-excel-o " %> Exportar
    <% end %>

    <%= link_to new_customer_path, class: 'btn btn-primary btn-large' do %>
      <%= fa_icon_tag "plus" %> Agregar cliente
    <% end %>
  </div>
<% end %>

<%= form_tag(customers_path, :method => "get", id: "search-form", class: "horizontal-form") do %>
  <div class="form-inputs row">
    <div class="col-9 col-sm-10">
      <%= text_field_tag :search, params[:search], placeholder: "Buscar cliente", class: "form-control" %>
    </div>
    <div class="">
      <%= submit_tag "Buscar", class: "btn btn-primary btn-large center" %>
    </div>
  </div>
<% end %>
            <tr>
              <td colspan=42 class='text-center'>No se encontraron empleados.</td>
            </tr>
          <% end %>
          </tbody>
        </table>
      </div>

      <%= will_paginate @employees if @employees.respond_to?(:total_pages) %>

    </div>
  </div>
</div>
